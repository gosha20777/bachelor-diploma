\subsubsection{Сдвиг FPN уровней} \label{sect-6-3}

Как говорилось в разделе \ref{sect-5-2}, FPN сеть имеет уязвимость, связанную с тем, что с ростом FPN уровней количество информации содержащейся в одном супер-пикселе (receptive field) увеличивается, при этом снижается размерность самой карты признаков. На практике это приводит к тому, что объекты малых размеров (люди, пни, коряги и т. д.) сворачиваются до нескольких супер-пикселей, из-за чего, СНС может легко перепутать человека и другой мелкий объект (например, пакет с мусором, или корягу). Это приводит к увеличению количества ложных срабатываний СНС и снижению эффективности алгоритма.

Первым и очевидным способом решить данную проблему является сдвиг FPN уровней вниз. Таким образом можно увеличить размерность карт признаков в FPN слоях. Для реализации этого подхода, программный код СНС был изменен таким образом, чтобы конфигурацию FPN пирамиды можно было задавать в конфигурационном файле, упрощая использование алгоритма. 

Так, в рамках эксперимента изначальная конфигурация FPN уровней ($P_3..P_7$) была изменена: все уровни сдвинулись на один вниз, а последний уровень был убран (для экономии вычислительных ресурсов). В результате получилась пирамида с конфигурацией $P_2..P_5$:

\addimghere{6-3-fpn-shift}{0.6}{Сдвиг уровней FPN}{5-2-fpn-shift}

Полученная модель была обучена аналогичным с приведенным в разделе \ref{sect-6-2} образом. Полученные в результате обучения результаты приведены в таблице ниже:

\begin{table}[H]
    \caption{Сравнение конфигураций FPN}\label{leaderboard-3}
    \begin{tabular}{|p{5cm}|p{5cm}|p{5cm}|}
        \hline
        {Тип модели} & {VisDrone, mAP} & {LaDD, mAP} \\
        \hline
        RetinaNet ($P_3..P_7$) & 0.34 & 0.87 \\
        \hline
        RetinaNet ($P_2..P_5$) & 0.42 & 0.90 \\
        \hline
    \end{tabular}
\end{table}

Из полученных результатов видно, что качество распознавания заметно улучшилось. Однако, вместе с увеличением размерностей и карт признаков, значительно возросло как время обработки изображения (в 3 раза), так и количество потребляемой памяти (более 4 Гб). Это затрудняет использование СНС на портативных компьютерах.